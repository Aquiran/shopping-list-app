# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a simple shopping list web application built as a single-page HTML file with inline CSS and JavaScript. The application is written in Korean (쇼핑 리스트 - Shopping List) and uses Supabase as the backend database for data persistence.

## Architecture

**Single-File Structure**: The entire application is contained in `index.html`:
- **HTML (lines 1-174)**: Page structure with input field, add button, list container, and statistics
- **CSS (lines 7-152)**: Inline styles with gradient background, card-based layout, and hover effects
- **JavaScript (lines 176-321)**: ES6 module that integrates with Supabase

**Backend Integration**:
- **Supabase Project**: "Shopping List" (project ID: zyshcuysltrsothmolwk)
- **Region**: ap-northeast-2 (Seoul)
- **Database Table**: `shopping_items`
  - Columns: `id` (bigserial), `text` (text), `checked` (boolean), `created_at` (timestamptz)
  - RLS enabled with allow-all policy for development
- **Client Library**: Loaded from CDN (`@supabase/supabase-js@2`)

**Data Model**: Database-backed structure:
```javascript
items = [
  { id: bigint, text: string, checked: boolean, created_at: timestamp }
]
```

**Key Functions** (all async):
- `loadItems()`: Fetches shopping list from Supabase database
- `addItem()`: Inserts new item into database
- `deleteItem(id)`: Deletes item from database by ID
- `toggleItem(id)`: Updates checked state in database
- `renderList()`: Updates DOM with current items state
- `updateStats()`: Displays total and checked item counts

**Important**: Functions `deleteItem` and `toggleItem` are exposed on `window` object to work with inline event handlers in the rendered HTML.

## Running the Application

Simply open `index.html` in a web browser. The application will automatically connect to the Supabase backend. No build process required.

## Testing

Use Playwright MCP and Supabase MCP together to test the application:

```bash
# Example workflow:
# 1. Navigate to file:///.../index.html with Playwright
# 2. Interact with UI (add items, toggle checkboxes, delete items)
# 3. Verify database state with Supabase MCP:
mcp__supabase__execute_sql:
  project_id: zyshcuysltrsothmolwk
  query: SELECT * FROM shopping_items ORDER BY created_at;
```

Test artifacts are stored in `.playwright-mcp/` directory.

## Supabase Database Access

To query or modify the database directly:
```sql
-- View all items
SELECT * FROM shopping_items ORDER BY created_at;

-- Check item count
SELECT COUNT(*) FROM shopping_items;

-- View checked items only
SELECT * FROM shopping_items WHERE checked = true;
```

Use `mcp__supabase__execute_sql` for SELECT queries or `mcp__supabase__apply_migration` for schema changes.

## Development Notes

- All CRUD operations are async and interact directly with Supabase
- Database IDs are auto-generated by PostgreSQL (bigserial)
- Local `items` array is populated from database on load, then updated after each operation
- Error handling includes console logging and user alerts
- The Supabase anon key is embedded in the HTML (acceptable for public applications with RLS)
